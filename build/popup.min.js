!function(a,b,c){"use strict";angular.module("ambersive.popup",["ambersive.helper"]),angular.module("ambersive.popup").config([function(){}]),angular.module("ambersive.popup").provider("popupSettings",[function(){var a="src/views/popup.modal.html",b=function(b){return b!==c?a=b:void 0},d="src/views/popup.modal.footer.html",e=function(a){return a!==c?d=a:void 0},f="src/views/popup.area.html",g=function(a){return a!==c?f=a:void 0},h="Close",i="OK",j=function(a){return a!==c&&(h=a),h},k=function(a){return a!==c&&(i=a),i};return{setModalTemplateUrl:b,setModalAreaTemplateUrl:g,setModalFooterTemplateUrl:e,setModalTextClose:j,setModalTextSubmit:k,$get:function(){return{modalTemplateUrl:a,modalAreaTemplateUrl:f,modalFooterTemplateUrl:d,modalTextClose:h,modalTextSubmit:i}}}}]),angular.module("ambersive.popup").factory("PopupSrv",["$q","HelperSrv","$rootScope","$log","$timeout",function(a,b,d,e,f){var g={},h=[];return g.amount=function(){return h.length},g.load=function(){d.$broadcast("checkPopup",{})},g.open=function(c){var e=a.defer();return c.name=c.name+b.generator.string(10),g.setPopup(c),g.load(),d.$on("loadedPopup"+c.name.toUpperCase(),function(a,b){e.resolve({unique:c.name.toUpperCase(),close:g.close})}),e.promise},g.close=function(){d.$broadcast("closePopup",{})},g.removePopup=function(a){a===c&&h.shift()},g.setPopup=function(a){h.push(a)},d.$on("checkPopup",function(a,b){h.length>0&&d.$broadcast("loadPopup",h[0])}),g}]),angular.module("ambersive.popup").run(["$rootScope","$log","$timeout","HelperSrv","$compile","popupSettings",function(a,d,e,f,g,h){try{e(function(){var d=f.template.forUrl(h.modalAreaTemplateUrl);if(""===d||null===d||d===c)throw"ambersive.popup: template is empty";var e=angular.element(b).find("body").eq(0);e.append(g(d)(a))},100)}catch(i){d.error(i)}}]),angular.module("ambersive.popup").directive("popup",["$compile","HelperSrv","$log","popupSettings","PopupSrv",function(a,b,d,e,f){var g={};return g.restrict="E",g.scope={name:"@?",settings:"=?",ctrl:"@"},g.replace=!0,g.transclude=!0,g.controller=["$scope","$rootScope","$controller",function(a,g,h){var i="";a.text={},a.template={},a.data={},a.ctrl===c&&(a.ctrl="PopupModalCtrl"),a.getCss=function(){return i},a.init=function(){var f=function(f){var g="";"footer"!==f||a.settings[f]===c||"default"!==a.settings[f].content&&"default"!==a.settings[f].url&&a.settings[f].standard!==!0?a.settings[f]!==c&&a.settings[f].content!==c?a.data[f]=a.settings[f].content:a.settings[f]!==c&&a.settings[f].url!==c&&(g=b.template.forUrl(a.settings[f].url),""===g||null===g||g===c?d.warn("ambersive.popup: cannot load html content for "+f+" area of popup. Maybe the content is empty?"):a.data[f]=g):(g=b.template.forUrl(e.modalFooterTemplateUrl),a.data[f]=g)};switch(a.data.headline=a.settings.headline,a.settings.size){case"small":i="modal-sm";break;case"large":i="modal-lg";break;default:i=""}f("main"),f("footer"),a.settings.text!==c&&(a.settings.text.close!==c&&(a.text.close=a.settings.text.close),a.settings.text.submit!==c&&(a.text.submit=a.settings.text.submit)),a.text.close===c&&(a.text.close=e.modalTextClose),a.text.submit===c&&(a.text.submit=e.modalTextSubmit),a.settings.global!==c&&a.settings.global.templateUrl!==c?a.template.url=a.settings.global.templateUrl:a.template.url=e.modalTemplateUrl,g.$broadcast("loadedPopup"+a.name.toUpperCase(),a.settings)},a.close=function(a){a!==c&&a.preventDefault(),g.$broadcast("closePopup",{})},a.submit=function(b){b!==c&&b.preventDefault(),a.settings.submit!==c?a.settings.submit(function(a){a===!0&&f.close()}):g.$broadcast("submitPopup"+a.name.toUpperCase(),a.settings)};var j=function(b){if(b!==c)try{return h(b,{$scope:a})}catch(e){d.error(e)}};j(a.ctrl),a.init()}],g.link=function(d,e,f){try{var g=b.template.forUrl(d.template.url);if(""===g||null===g||g===c)throw"ambersive.popup html ist empty";e.html(g),e.replaceWith(a(e.html())(d))}catch(h){alert(h)}},g}]),angular.module("ambersive.popup").controller("PopupAreaCtrl",["$scope","$rootScope","PopupSrv","$timeout","$log",function(a,b,d,e,f){var g=this,h="",i={style:"none"};g.getStyle=function(){return i},g.getCss=function(){return h},g.currentPopup=null,g.settings={},g.popup="",a.$on("loadPopup",function(a,b){g.popup="",i.display="block",b.name!==c&&b.name!==g.currentPopup&&(g.currentPopup=b.name,g.settings=b.settings,e(function(){g.popup='<popup settings="popupArea.settings" name="'+g.currentPopup+'"></popup>',e(function(){h="in"},100)},100))}),a.$on("closePopup",function(a,c){h="",e(function(){i.display="none",g.popup="",g.currentPopup=null,d.removePopup(),b.$broadcast("checkPopup",{})},800)})}]),angular.module("ambersive.popup").controller("PopupModalCtrl",["$timeout","$scope","$rootScope",function(a,b,c){}])}(window,document,void 0),angular.module("ambersive.popup").run(["$templateCache",function(a){"use strict";a.put("src/views/popup.area.html",'<div id=popup_area ng-controller="PopupAreaCtrl as popupArea" compile=popupArea.popup class="modal fade" ng-class=popupArea.getCss() ng-style=popupArea.getStyle()></div>'),a.put("src/views/popup.modal.footer.html",'<button type=button class="btn btn-default" ng-click=close($event)>{{text.close}}</button> <button type=button class="btn btn-primary" ng-click=submit($event)>{{text.submit}}</button>'),a.put("src/views/popup.modal.html",'<div class=modal-dialog ng-class=getCss()><div class=modal-content><div class=modal-header><button type=button class=close ng-click=close($event) aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class=modal-title>{{ data.headline }}</h4></div><div class=modal-body compile=data.main></div><div class=modal-footer compile=data.footer ng-if="data.footer !== undefined"></div></div></div>')}]);